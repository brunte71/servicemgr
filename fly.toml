# fly.toml – Fly.io deployment configuration for ServiceMgr
# Docs: https://fly.io/docs/reference/configuration/
#
# Estimated annual cost: $0 – $36 (within Fly.io free-tier allowances)
#   - 1 shared-cpu-1x VM (256 MB RAM) – free up to 3 VMs
#   - 1 GB persistent volume – free up to 3 GB total
#   - Outbound bandwidth – free up to 160 GB/month

app = "servicemgr"          # Change to your unique Fly.io app name
primary_region = "ams"      # Amsterdam – pick the region closest to your users

[build]
  dockerfile = "Dockerfile"

# The persistent volume is mounted at /app/data so all CSV files and
# uploaded photos survive container restarts and re-deployments.
[mounts]
  source      = "servicemgr_data"   # volume name (created once with `fly volumes create`)
  destination = "/app/data"

[http_service]
  internal_port        = 8501
  force_https          = true
  auto_stop_machines   = true   # stop when idle to stay within free tier
  auto_start_machines  = true
  min_machines_running = 0      # 0 = scale to zero; set to 1 for always-on

[[vm]]
  size   = "shared-cpu-1x"
  memory = "256mb"
